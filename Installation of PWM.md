## Installation and Configuration of PWMPWM is an open source password self service application for LDAP directories. PWM is an ideal candidate for organizations that wish to role their own password self service solution.###**Minimum Requirements**Java J2SE v1.5 (5.0) or greater.Tomcat v5. or greater###**Installation****Java:** Refer Installation Document**Tomcat Installation and SSL configuration**: Refer Installation Document**Netspective Operations Repository:**    cd $HOME    ssh-keygen -t rsa     vi .ssh/id_rsa.pubPaste the ssh key into the GitHub account you'll be using    git clone git@github.com:netspective/operations.git**PWM:**Download PWM from the url: http://code.google.com/p/pwm/downloads/listor     wget http://code.google.com/p/pwm/downloads/detail?name=pwm_v1.6.1.zipNow unzip the contents    unzip pwm_v1.6.1.zipMove the pwm war to apache tomcat webapps directory.    cp -rv pwm.war /opt/apache-tomcat-version/webappsCopy the Netspective configuration file from repository to current pwm WEB-INF directory.    cp -rv /$HOME/operations/configuration/server/sso/pwm_server/PwmConfiguration.xml /opt/apache-tomcat-version/webapps/pwm/WEB-INF/Restart tomcat    catalina.sh stop    catalina.sh startWhen tomcat starts up, it will deploy the war file into /webapps/pwm directory. Next, visit the pwm application with a browser. Assuming your browser and tomcat are on the same machine and your using the default tomcat port numbers, the url will be (change localhost to your IP/domain name):> https://locahost:8443/pwmWhile accessing above url you will a page in which on top you will see "PWM is in configuration mode. Use the ConfigManager to modify or lock the configuration." Click on ConfigManagerYou will see PWM Configuration Editor and click on view and tick on "Show Advanced Settings"Now change the followings settings to match your ldap server properties:Click on settings and take LDAP Directory    Under LDAP URLs change ldap url to your ldap server's ip. For eg: ldap://netspective.com:10389    Change LDAP Proxy User. For eg: uid=admin,ou=users,ou=system    Change LDAP Proxy Password to your password.    Change LDAP Contextless Login Root where its the base context to search for usernames during login. For eg: ou=users,ou=system    Change PWM Admin Query String with your ldap admin user For eg: uid=admin,ou=users,ou=system**Configuration changes for PWM integrating with CAS**In PWM Configuration Editor click on settings and take Miscellaneous    Change CAS ClearPass URL to your CAS server url. For eg: https://netspectivecas.com:8443/cas/clearPassClick on Actions and Save.Now open file /opt/apache-tomcat-version/webapps/pwm/WEB-INF/web.xml either through shell or FTP    vi /apache-tomcat-version/webapps/pwm/WEB-INF/web.xmlNow In the PWM web.xml you will need to uncomment the CAS section and fit it to your environment. Note the text is already in the web.xml, it just needs the comments removed and the settings modified.    <filter>            <filter-name>CAS Validation Filter</filter-name>            <filter-class>org.jasig.cas.client.validation.Cas20ProxyReceivingTicketValidationFilter</filter-class>            <init-param>                <param-name>casServerUrlPrefix</param-name>                <param-value>https://netspectivecas.com:8443/cas/</param-value>            </init-param>            <init-param>                <param-name>serverName</param-name>                <param-value>netspective.com:8443</param-value>            </init-param>            <init-param>                <param-name>proxyCallbackUrl</param-name>                <param-value>https://netspective.com:8443/pwm/proxyCallback</param-value>            </init-param>            <init-param>                <param-name>proxyReceptorUrl</param-name>                <param-value>/proxyCallback</param-value>            </init-param>        </filter>        <filter>            <filter-name>CAS Authentication Filter</filter-name>            <filter-class>org.jasig.cas.client.authentication.AuthenticationFilter</filter-class>            <init-param>                <param-name>casServerLoginUrl</param-name>                <param-value>https://netcpectivecas.com:8443/cas/login</param-value>            </init-param>            <init-param>                <param-name>serverName</param-name>                <param-value>netspective.com:8443</param-value>            </init-param>            <init-param>                <param-name>renew</param-name>                <param-value>false</param-value>            </init-param>            <init-param>                <param-name>gateway</param-name>                <param-value>false</param-value>            </init-param>        </filter>        <filter>            <filter-name>CAS Single Sign Out Filter</filter-name>            <filter-class>org.jasig.cas.client.session.SingleSignOutFilter</filter-class>        </filter>        <filter-mapping>            <filter-name>CAS Single Sign Out Filter</filter-name>            <url-pattern>/*</url-pattern>        </filter-mapping>Now we can lock the configuration so that once the configuration is locked, you can no longer directly edit the running configuration using browser interface.    vi /opt/apache-tomcat-version/webapps/pwm/WEB-INF/PwmConfiguration.xmlChange true to false in <property key="configIsEditable">true</property> so that it will be as follows:    <properties>        <property key="configIsEditable">false</property>If you wish to make changes after locking, you will need to have access to the /opt/apache-tomcat-version/webapps/pwm/WEB-INF/PwmConfiguration.xml file on the PWM server.
##CAS: Central Authentication Service provides enterprise single sign-on servicePrerequisites:Apache Tomcat with SSLApache MavenNetspective Operations Repository:        cd $HOME    ssh-keygen -t rsa    vi .ssh/id_rsa.pubPaste the ssh key into the GitHub account you'll be using.    git clone git@github.com:netspective/operations.gitDownload:You can view versions of Jasiq CAS from the url: http://downloads.jasig.org/cas/ and to download:    cd $HOME    wget http://downloads.jasig.org/cas/cas-server-3.4.11-release.tar.gz**Configuration of CAS:**We are currently configuring CAS in such a way that it will meet following requirements1. Able to Integarte CAS with LDAP1. CAS can be used as CAS SAML1. Able to integrate CAS with PWMExtract the file    tar -xvf  cas-server-3.4.11-release.tar.gz    cd cas-server-3.4.11/cas-server-webapp    vi pom.xmlIn pom.xml file under < dependencies > add following contents:      <dependency>    <groupId>org.jasig.cas3.extensions</groupId>    <artifactId>clearpass-webapp</artifactId>    <version>1.0.7.GA</version>    <scope>runtime</scope>    <type>war</type>    </dependency>        <dependency>            <groupId>commons-logging</groupId>            <artifactId>commons-logging</artifactId>            <version>1.1.1</version>    </dependency>        <dependency>            <groupId>net.sf.ehcache</groupId>            <artifactId>ehcache-core</artifactId>            <version>2.5.1</version>    </dependency>        <dependency>            <groupId>junit</groupId>            <artifactId>junit</artifactId>            <version>4.10</version>    </dependency>    <dependency>            <groupId>org.springframework.ldap</groupId>            <artifactId>spring-ldap-core</artifactId>            <version>1.3.1.RELEASE</version>    </dependency>        <dependency>            <groupId>org.springframework.ldap</groupId>            <artifactId>spring-ldap-core-tiger</artifactId>            <version>1.3.1.RELEASE</version>    </dependency>        <dependency>            <groupId>org.springframework.security</groupId>            <artifactId>spring-security-ldap</artifactId>            <version>3.1.0.RELEASE</version>    </dependency>        <dependency>            <groupId>org.springframework</groupId>            <artifactId>spring-beans</artifactId>            <version>3.1.1.RELEASE</version>    </dependency>Save file and go to CAS source folder.    cd $HOME/cas-server-3.4.11Building CAS war file using Apache Maven    mvn -Dmaven.test.skip=true clean installIt will take some time and after successful completion there created a war file (called cas.war) and can be found inside folder  $HOME/cas-server-3.4.11/cas-server-webapp/targetCopy cas.war file to tomcat webapps directory.cp -r $HOME/cas-server-3.4.11/cas-server-webapp/target/cas.war /opt/apache-tomcat-version/webapps/Restart Apache    catalina.sh stop    catalina.sh startNow copy configuration files and person-directory-impl-1.5.0-RC6.jar to current CAS directory. This jar file is modified in such a way that it contains new role fetcher class called LdapPersonAttributeAndRoleDao.    cp -rv /$HOME/operations/configuration/server/sso/cas_server/deployerConfigContext.xml /opt/apache-tomcat-version/webapps/cas/WEB-INF/        cp -rv /$HOME/operations/configuration/server/sso/cas_server/web.xml /opt/apache-tomcat-version/webapps/cas/WEB-INF/    cp -rv /$HOME/operations/configuration/server/sso/cas_server/cas.properties /opt/apache-tomcat-version/webapps/cas/WEB-INF/                cp -rv /$HOME/operations/configuration/server/sso/cas_server/person-directory-impl-1.5.0-RC6.jar /opt/apache-tomcat-version/webapps/cas/WEB-INF/lib/Now edit cas.properties to meet your current settings:    vi /opt/apache-tomcat-version/webapps/cas/WEB-INF/cas.propertiesChange below lines to meet your settings. Here for eg: netspective.com> server.prefix=http://netspective.com:8080/cas> cas.securityContext.serviceProperties.service=https://netspective.com:8443/cas/services/j_acegi_cas_security_check> cas.securityContext.casProcessingFilterEntryPoint.loginUrl=https://netspective.com:8443/cas/login> cas.securityContext.casProxyTicketValidator.casValidate=https://netspective.com:8443/cas/proxyValidateNext we can edit web.xml.vi /opt/apache-tomcat-version/webapps/cas/WEB-INF/web.xmlChange below lines to meet your settings. Here for eg: netspective.com     <init-param>        <param-name>casServerUrlPrefix</param-name>>         <param-value>https://netspective.com:8443/cas</param-value>      </init-param>      <init-param>        <param-name>serverName</param-name>>         <param-value>netspective.com:8443</param-value>      </init-param>        <init-param>         <param-name>allowedProxyChains</param-name>>          <param-value>https://netspective.com:8443/pwm/proxyCallback</param-value>        </init-param>Now open the file /opt/apache-tomcat-version/webapps/cas/WEB-INF/deployerConfigContext.xml    vi /opt/apache-tomcat-version/webapps/cas/WEB-INF/deployerConfigContext.xmlEdit this file so that it will meet to your LDAP Server settings.For eg. Hostname we are using as netspective.com'searchBase' and 'baseDN' context search for usernames that matches 'principalAttributeName' during login and for our case it is ou=users,ou=system and uid'userDn' specifies the user with admin privileges and 'password' specifies its password. 'entry key' specifies the LDAP entry attributes and 'value' as Principal's while passing SAML Assertions.***    <bean class="org.jasig.cas.authentication.principal.UsernamePasswordCredentialsToPrincipalResolver" />          </property>          <!-- The query made to find the Principal ID. "%u" will be replaced by the resolved Principal -->          <property name="filter" value="(uid=%u)" />          <!-- The attribute used to define the new Principal ID -->              <property name="principalAttributeName" value="uid" />              <property name="searchBase" value="ou=users,ou=system" />Restart Apache    catalina.sh stop    catalina.sh startNow your CAS is ready and you can access CAS from the url:> https://netspective.com:8443/cas/Now you can use your LDAP User Name and Password for login.